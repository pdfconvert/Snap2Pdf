<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indian Resume Maker — Regenerated</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --panel-w:15cm; --panel-h:20cm;
      --accent:#ff7a00; --muted:#6b7280; --bg:#f4f7fb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#f8fbff,#eef6ff);color:#09203f}
    .topbar{display:flex;align-items:center;gap:12px;padding:12px 16px;background:rgba(255,255,255,0.8);border-bottom:1px solid rgba(9,32,63,0.04)}
    .brand{font-family:Poppins;font-weight:700}
    .controls{margin-left:auto;display:flex;gap:8px;align-items:center}
    .btn{padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#ffb86b);color:white;border:0;cursor:pointer;font-weight:700}
    .ghost{background:transparent;border:1px solid rgba(9,32,63,0.06);padding:8px 12px;border-radius:10px}
    .wrap{display:flex;gap:18px;padding:18px;height:calc(100vh - 64px)}
    /* Equal columns desktop */
    .col{flex:1;min-width:280px;display:flex;flex-direction:column}
    .card{background:white;border-radius:12px;padding:14px;box-shadow:0 12px 40px rgba(9,32,63,0.06);overflow:auto}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #eef3fb;background:linear-gradient(180deg,#fff,#fbfdff);font-size:14px}
    textarea{min-height:80px}
    .row{display:flex;gap:8px}
    .small{font-size:13px;color:var(--muted)}
    .preview-frame{width:100%;height:100%;border-radius:10px;background:white;border:1px solid #e9f0ff;box-shadow:0 30px 80px rgba(9,32,63,0.06);overflow:auto;display:flex;flex-direction:column}
    .preview-inner{padding:22px;font-family:Inter}
    .section-title{font-weight:700;margin-top:12px;margin-bottom:6px}
    table.edu, table.lic{width:100%;border-collapse:collapse}
    table.edu th, table.edu td, table.lic th, table.lic td{border:1px solid rgba(9,32,63,0.06);padding:8px;font-size:13px;background:linear-gradient(90deg,#fff,#fff7f0)}
    table.edu th, table.lic th{font-weight:700;background:linear-gradient(90deg,#fff7e6,#fff3d6)}
    .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    /* template theme classes (10) */
    .tpl-1 .preview-inner{--accent:#0b5cff}
    .tpl-2 .preview-inner{--accent:#6c5ce7}
    .tpl-3 .preview-inner{--accent:#00b894}
    .tpl-4 .preview-inner{--accent:#0984e3}
    .tpl-5 .preview-inner{--accent:#e17055}
    .tpl-6 .preview-inner{--accent:#fd7e14}
    .tpl-7 .preview-inner{--accent:#f6c85f}
    .tpl-8 .preview-inner{--accent:#2d3436}
    .tpl-9 .preview-inner{--accent:#16a085}
    .tpl-10 .preview-inner{--accent:#9b59b6}
    .tpl-1 .hdr{background:linear-gradient(90deg,#eef6ff,var(--accent));padding:10px;border-radius:8px}
    /* small responsive behavior: on mobile, stack and hide preview until update */
    @media(max-width:860px){
      .wrap{flex-direction:column;height:auto}
      .col{width:100%}
      .preview-frame{height:calc(100vh - 300px)}
    }
    .hidden{display:none !important}
    /* back button on preview mobile */
    .mobile-back{display:none;margin-left:auto}
    @media(max-width:860px){ .mobile-back{display:inline-flex} }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">Indian Resume Maker (Regenerated)</div>
    <div style="margin-left:12px">
      <select id="templateDropdown" style="padding:8px;border-radius:8px;border:1px solid #eef3fb"></select>
    </div>
    <div class="controls">
      <button class="ghost" id="backMore">Back to More</button>
      <button class="ghost" id="backResume">Back to Resume/CV</button>
      <button class="ghost" id="shareBtn">Share</button>
    </div>
  </div>

  <div class="wrap" id="mainWrap">
    <!-- LEFT: FORM (now left) -->
    <div class="col" id="formCol">
      <div class="card" style="flex:1">
        <h3>Fill the Form</h3>

        <label>Template (select only from dropdown)</label>
        <select id="templateSelect" style="margin-top:6px"></select>

        <label>Photo</label>
        <input type="file" id="photoInput" accept="image/*">
        <div style="margin-top:8px"><img id="photoPreview" style="width:110px;height:110px;object-fit:cover;border-radius:8px;border:1px solid #eee" alt="Photo preview"></div>

        <label>Full Name</label>
        <input id="name" placeholder="Your name">

        <label>Title / Position (comma separated)</label>
        <input id="title" placeholder="Software Engineer, Team Lead">

        <label>Profile</label>
        <select id="profile">
          <option value="None">None</option>
          <option>Student</option>
          <option>Fresher</option>
          <option>Supervisor</option>
          <option>Labour</option>
          <option>Truck Driver</option>
          <option>Car Driver</option>
          <option>Office Staff</option>
          <option>Teacher</option>
          <option>Engineer</option>
          <option>Doctor</option>
          <option>Sales Executive</option>
          <option>Security Guard</option>
          <option>Helper</option>
          <option>Accountant</option>
          <option>Computer Operator</option>
          <option>Manager</option>
          <option value="Write">✍️ Write My Own</option>
        </select>
        <div id="profileCustomWrap" style="display:none;margin-top:8px"><input id="profileCustom" placeholder="Write your profile"></div>

        <label>Objective</label>
        <select id="objective">
          <option value="">-- Select --</option>
          <option>To obtain a challenging position to expand my skills.</option>
          <option>Seeking an entry-level role to build practical experience.</option>
          <option>To secure a supervisor role and lead a team.</option>
          <option>To work as a Driver with a reputed company.</option>
          <option>To apply vocational skills in a stable job.</option>
          <option value="Write">✍️ Write My Own</option>
        </select>
        <div id="objectiveCustomWrap" style="display:none;margin-top:8px"><textarea id="objectiveCustom" placeholder="Write your objective"></textarea></div>

        <label>Summary / Profile Summary</label>
        <textarea id="summary"></textarea>

        <label>Education (rows will form a table in preview)</label>
        <div id="eduRows"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" id="addEdu">+ Add Education Row</button>
          <button class="ghost" id="clearEdu">Clear</button>
        </div>

        <label style="margin-top:12px">Experience</label>
        <div id="expRows"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" id="addExp">+ Add Experience</button>
        </div>

        <label style="margin-top:12px">Licence Details (Driver/Supervisor)</label>
        <div id="licRows"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" id="addLic">+ Add Licence Row</button>
        </div>

        <label style="margin-top:12px">Personal Details</label>
        <input id="father" placeholder="Father's name" style="margin-top:8px">
        <div class="row" style="margin-top:8px">
          <input id="dob" type="date">
          <input id="marital" placeholder="Marital Status">
        </div>
        <input id="languages" placeholder="Languages known" style="margin-top:8px">

        <label style="margin-top:12px">Identity Card</label>
        <div class="row" style="gap:8px">
          <select id="idType">
            <option value="">Select</option>
            <option>Aadhaar Card</option>
            <option>PAN Card</option>
            <option>Voter ID</option>
            <option>Passport</option>
            <option>Driving Licence</option>
            <option>Other</option>
          </select>
          <input id="idNo" placeholder="ID Number">
        </div>

        <label style="margin-top:12px">Religion</label>
        <input id="religion" placeholder="Religion">

        <label style="margin-top:12px">Nationality</label>
        <input id="nationality" placeholder="Nationality">

        <label style="margin-top:12px">Hobbies</label>
        <input id="hobbies" placeholder="Reading, Music">

        <label style="margin-top:12px">Declaration (Footer)</label>
        <input id="declaration" value="I hereby declare that the information given above is true to the best of my knowledge.">

        <div class="actions">
          <button class="btn" id="updatePreview">Update Preview</button>
          <button class="btn" id="downloadPdf">Download PDF</button>
          <button class="btn" id="downloadImg">Download PNG</button>
          <button class="btn" id="downloadDoc">Download Word</button>
        </div>

      </div>
    </div>

    <!-- RIGHT: PREVIEW (now right) -->
    <div class="col" id="previewCol">
      <div class="preview-frame card" id="previewFrame">
        <div style="display:flex;align-items:center;gap:8px;padding:12px;border-bottom:1px solid rgba(9,32,63,0.03)">
          <div class="small">Preview</div>
          <button class="ghost mobile-back" id="backToForm">← Back to Form</button>
        </div>
        <div class="preview-inner" id="previewInner">Preview will be generated here</div>
      </div>
    </div>
  </div>

<script>
/* Regenerated resume maker - meets user's demands:
   - Only dropdown template selection (no thumbnail strip)
   - Left = Form, Right = Preview equal width desktop
   - Education table rows, Licence table rows, identity fields, religion, nationality
   - Profile includes None and Write My Own; objective includes Write My Own
   - Mobile: form shown first; Update Preview shows preview full-screen; Back returns to form preserving data
   - Empty fields hidden in preview
   - Export: PDF, PNG, Word (HTML->docx fallback)
*/

const tplCount = 10;
const templateDropdown = document.getElementById('templateDropdown');
const templateSelect = document.getElementById('templateSelect');

for(let i=1;i<=tplCount;i++){
  const label = ['Corporate','Student','Fresher','Supervisor','Labour','Truck Driver','Car Driver','Engineer','Doctor','Manager'][i-1] || ('Template '+i);
  const opt = document.createElement('option'); opt.value = i; opt.textContent = `${i} — ${label}`; templateDropdown.appendChild(opt);
  const opt2 = document.createElement('option'); opt2.value=i; opt2.textContent = `${i} — ${label}`; templateSelect.appendChild(opt2);
}
templateDropdown.value = 1; templateSelect.value = 1;

let currentTemplate = 1;
function applyTemplateFromDropdown(){
  const val = parseInt(templateDropdown.value||1); currentTemplate = val; templateSelect.value = val;
  render();
}
templateDropdown.addEventListener('change',applyTemplateFromDropdown);
templateSelect.addEventListener('change',()=>{ currentTemplate = parseInt(templateSelect.value||1); templateDropdown.value = currentTemplate; render(); });

/* elements */
const profile = document.getElementById('profile');
const profileCustomWrap = document.getElementById('profileCustomWrap');
const profileCustom = document.getElementById('profileCustom');
profile.addEventListener('change', ()=>{ if(profile.value==='Write') profileCustomWrap.style.display='block'; else profileCustomWrap.style.display='none'; render(); });

const objective = document.getElementById('objective');
const objectiveCustomWrap = document.getElementById('objectiveCustomWrap');
const objectiveCustom = document.getElementById('objectiveCustom');
objective.addEventListener('change', ()=>{ if(objective.value==='Write') objectiveCustomWrap.style.display='block'; else objectiveCustomWrap.style.display='none'; render(); });

/* photo */
const photoInput = document.getElementById('photoInput'), photoPreview = document.getElementById('photoPreview');
photoInput.addEventListener('change', e=>{ const f = e.target.files && e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=ev=>{ photoPreview.src = ev.target.result; render(); }; r.readAsDataURL(f); });

/* add rows functions */
function addEdu(row){
  const div = document.createElement('div'); div.className='edu';
  div.innerHTML = `<div style="display:flex;gap:8px;margin-top:8px">
    <input class='eg' placeholder='Grade/Class'>
    <input class='eb' placeholder='Board/University'>
    <input class='ey' placeholder='Year' style='width:90px'>
    <input class='es' placeholder='Subject'>
    <input class='ep' placeholder='%' style='width:80px'>
    <button class='ghost' onclick="this.closest('div.edu').remove();render();">Remove</button>
  </div>`;
  document.getElementById('eduRows').appendChild(div);
  if(row){ div.querySelector('.eg').value=row.g||''; div.querySelector('.eb').value=row.b||''; div.querySelector('.ey').value=row.y||''; div.querySelector('.es').value=row.s||''; div.querySelector('.ep').value=row.p||''; }
}
document.getElementById('addEdu').addEventListener('click', ()=>addEdu());
document.getElementById('clearEdu').addEventListener('click', ()=>{ document.getElementById('eduRows').innerHTML=''; render(); });

function addExp(row){
  const div = document.createElement('div'); div.className='exp';
  div.innerHTML = `<div style="display:flex;gap:8px;margin-top:8px">
    <input class='eyr' placeholder='Year(s)' style='width:120px'>
    <input class='erole' placeholder='Role'>
    <input class='ecomp' placeholder='Company'>
    <input class='edes' placeholder='Short Description'>
    <button class='ghost' onclick="this.closest('div.exp').remove();render();">Remove</button>
  </div>`;
  document.getElementById('expRows').appendChild(div);
  if(row){ div.querySelector('.eyr').value=row.y||''; div.querySelector('.erole').value=row.r||''; div.querySelector('.ecomp').value=row.c||''; div.querySelector('.edes').value=row.d||''; }
}
document.getElementById('addExp').addEventListener('click', ()=>addExp());

function addLic(row){
  const div = document.createElement('div'); div.className='lic';
  div.innerHTML = `<div style="display:flex;gap:8px;margin-top:8px">
    <input class='ln' placeholder='Licence No'>
    <input class='lc' placeholder='Licence Class'>
    <input class='lf' type='date' placeholder='Issued From'>
    <input class='lu' type='date' placeholder='Valid Upto'>
    <button class='ghost' onclick="this.closest('div.lic').remove();render();">Remove</button>
  </div>`;
  document.getElementById('licRows').appendChild(div);
  if(row){ div.querySelector('.ln').value=row.no||''; div.querySelector('.lc').value=row.cls||''; div.querySelector('.lf').value=row.from||''; div.querySelector('.lu').value=row.upto||''; }
}
document.getElementById('addLic').addEventListener('click', ()=>addLic());

/* initial demo rows for convenience */
addEdu({g:'B.Tech',b:'ABC University',y:'2023',s:'CS',p:'75%'});
addEdu({g:'12th',b:'State Board',y:'2019',s:'Science',p:'82%'});
addExp({y:'2023-2024',r:'Intern',c:'DevCorp',d:'Frontend'});
addLic({no:'DL-123456',cls:'LMV',from:'2019-05-10',upto:'2029-05-09'});

/* rendering logic */
function render(){
  const name = (document.getElementById('name').value||'').trim();
  const title = (document.getElementById('title').value||'').trim();
  let profileVal = document.getElementById('profile').value;
  if(profileVal==='Write') profileVal = (document.getElementById('profileCustom').value||'').trim();
  if(profileVal==='None') profileVal='';
  let objectiveVal = document.getElementById('objective').value;
  if(objectiveVal==='Write') objectiveVal = (document.getElementById('objectiveCustom').value||'').trim();
  const summary = (document.getElementById('summary').value||'').trim();
  const hobbies = (document.getElementById('hobbies').value||'').trim();
  const father = (document.getElementById('father').value||'').trim();
  const dob = document.getElementById('dob').value||'';
  const marital = (document.getElementById('marital').value||'').trim();
  const languages = (document.getElementById('languages').value||'').trim();
  const idType = (document.getElementById('idType').value||'');
  const idNo = (document.getElementById('idNo').value||'').trim();
  const religion = (document.getElementById('religion').value||'').trim();
  const nationality = (document.getElementById('nationality').value||'').trim();
  const declaration = (document.getElementById('declaration').value||'').trim();

  const edu = [];
  document.querySelectorAll('#eduRows .edu').forEach(d=>{
    const g=d.querySelector('.eg').value.trim(); const b=d.querySelector('.eb').value.trim(); const y=d.querySelector('.ey').value.trim();
    const s=d.querySelector('.es').value.trim(); const p=d.querySelector('.ep').value.trim();
    if(g||b||y||s||p) edu.push({g,b,y,s,p});
  });

  const exps = [];
  document.querySelectorAll('#expRows .exp').forEach(d=>{
    const y=d.querySelector('.eyr').value.trim(); const r=d.querySelector('.erole').value.trim(); const c=d.querySelector('.ecomp').value.trim(); const de=d.querySelector('.edes').value.trim();
    if(y||r||c||de) exps.push({y,r,c,de});
  });

  const lics = [];
  document.querySelectorAll('#licRows .lic').forEach(d=>{
    const no=d.querySelector('.ln').value.trim(); const cls=d.querySelector('.lc').value.trim(); const from=d.querySelector('.lf').value; const upto=d.querySelector('.lu').value;
    if(no||cls||from||upto) lics.push({no,cls,from,upto});
  });

  // build preview HTML
  let html = `<div class='resume-root tpl-${currentTemplate}'>`;

  // header
  html += `<div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">`;
  html += `<div style="width:88px;height:88px;border-radius:10px;overflow:hidden;background:#f0f2f7">` + (photoPreview.src?`<img src="${photoPreview.src}" style="width:100%;height:100%;object-fit:cover">`:'<div style="display:flex;align-items:center;justify-content:center;height:88px;color:#aaa">Photo</div>') + `</div>`;
  html += `<div><div style="font-family:Poppins;font-weight:700;font-size:20px">${escape(name||'Your Name')}</div><div style="color:var(--muted)">${escape(title||'')}</div></div></div>`;

  // profile/objective/summary
  if(profileVal) html += `<div><div class="section-title">Profile</div><div class="small">${escape(profileVal)}</div></div>`;
  if(objectiveVal) html += `<div><div class="section-title">Objective</div><div class="small">${escape(objectiveVal)}</div></div>`;
  if(summary) html += `<div><div class="section-title">Summary</div><div class="small">${escape(summary)}</div></div>`;

  // education table
  if(edu.length){
    html += `<div><div class="section-title">Education</div><table class="edu"><thead><tr><th>Grade/Class</th><th>Board/University</th><th>Year</th><th>Subject</th><th>%</th></tr></thead><tbody>`;
    edu.forEach(e=>{ html += `<tr><td>${escape(e.g)}</td><td>${escape(e.b)}</td><td>${escape(e.y)}</td><td>${escape(e.s)}</td><td>${escape(e.p)}</td></tr>`; });
    html += `</tbody></table></div>`;
  }

  // licence table for driver/supervisor
  const profileLower = (profileVal||'').toLowerCase();
  if((profileLower.includes('driver')||profileLower.includes('supervisor')) && lics.length){
    html += `<div><div class="section-title">Licence Details</div><table class="lic"><thead><tr><th>Licence No</th><th>Class</th><th>Issued From</th><th>Valid Upto</th></tr></thead><tbody>`;
    lics.forEach(l=>{ html += `<tr><td>${escape(l.no)}</td><td>${escape(l.cls)}</td><td>${escape(l.from)}</td><td>${escape(l.upto)}</td></tr>`; });
    html += `</tbody></table></div>`;
  }

  // experience
  if(exps.length){
    html += `<div><div class="section-title">Experience</div>`;
    exps.forEach(e=>{ html += `<div style="margin-bottom:8px"><strong>${escape(e.y)}</strong> - ${escape(e.r)} at ${escape(e.c)}<div class="small">${escape(e.de)}</div></div>`; });
    html += `</div>`;
  }

  // personal details
  let pd='';
  if(father) pd += `Father: ${escape(father)}<br>`;
  if(dob) pd += `D.O.B: ${escape(dob)}<br>`;
  if(marital) pd += `Marital: ${escape(marital)}<br>`;
  if(languages) pd += `Languages: ${escape(languages)}<br>`;
  if(idType && idNo) pd += `${escape(idType)}: ${escape(idNo)}<br>`;
  if(religion) pd += `Religion: ${escape(religion)}<br>`;
  if(nationality) pd += `Nationality: ${escape(nationality)}<br>`;
  if(pd) html += `<div><div class="section-title">Personal Details</div><div class="small">${pd}</div></div>`;

  // hobbies
  if(hobbies) html += `<div><div class="section-title">Hobbies</div><div class="small">${escape(hobbies)}</div></div>`;

  // declaration
  html += `<div style="margin-top:16px;border-top:1px dashed rgba(9,32,63,0.06);padding-top:10px"><div>${escape(declaration||'I hereby declare that the information given above is true to the best of my knowledge.')}</div>`;
  html += `<div style="display:flex;justify-content:space-between;margin-top:10px"><div>Date: ${new Date().toLocaleDateString()}</div><div>(Signature) <strong>${escape(name||'')}</strong></div></div></div>`;

  html += `</div>`; // root end

  // apply theme class
  const previewInner = document.getElementById('previewInner');
  previewInner.parentElement.className = 'preview-frame card tpl-wrap tpl-'+currentTemplate;
  previewInner.innerHTML = html;
}

/* escape helper */
function escape(s){ return (s||'').toString().replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* exports */
function loadScript(src,cb){ if(document.querySelector(`script[src="${src}"]`)) return cb(); const s=document.createElement('script'); s.src=src; s.onload=cb; s.onerror=()=>alert('Failed to load '+src); document.head.appendChild(s); }
document.getElementById('downloadPdf').addEventListener('click', ()=>{ render(); loadScript('https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js', ()=>{ const el=document.getElementById('previewInner').firstElementChild; if(!el) return alert('Nothing to export'); html2pdf().set({margin:10,filename:(document.getElementById('name').value||'resume')+'.pdf',image:{type:'jpeg',quality:0.98},html2canvas:{scale:2},jsPDF:{unit:'mm',format:'a4'}}).from(el).save(); }); });

document.getElementById('downloadImg').addEventListener('click', ()=>{ render(); loadScript('https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js', ()=>{ const el=document.getElementById('previewInner').firstElementChild; if(!el) return alert('Nothing to export'); html2canvas(el,{scale:2}).then(c=>{ const url=c.toDataURL('image/png'); const a=document.createElement('a'); a.href=url; a.download=(document.getElementById('name').value||'resume')+'.png'; a.click(); }); }); });

document.getElementById('downloadDoc').addEventListener('click', ()=>{ render(); const el = document.getElementById('previewInner').firstElementChild; if(!el) return alert('Nothing to export'); const html = `<!doctype html><html><head><meta charset="utf-8"><title>${document.getElementById('name').value||'Resume'}</title></head><body>${el.outerHTML}</body></html>`; const blob = new Blob(['\ufeff', html], {type: 'application/msword'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = (document.getElementById('name').value||'resume') + '.doc'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),5000); });

/* mobile preview behavior: on small screens show form first, Update Preview opens preview fullscreen, back returns */
const updateBtn = document.getElementById('updatePreview');
const formCol = document.getElementById('formCol');
const previewCol = document.getElementById('previewCol');
const backToFormBtn = document.getElementById('backToForm');

function isMobile(){ return window.innerWidth <= 860; }

updateBtn.addEventListener('click', ()=> {
  render();
  if(isMobile()){
    // push state so that back button returns to form
    history.pushState({preview:true}, '', '#preview');
    formCol.classList.add('hidden');
    previewCol.classList.remove('hidden');
    // show back button
  } else {
    // desktop just update preview
    // no layout change
  }
});

backToFormBtn.addEventListener('click', ()=> {
  // return to form view on mobile
  history.back();
});

window.addEventListener('popstate', (e) => {
  // when user presses back on mobile, restore form
  if(isMobile()){
    // if state has preview -> removing preview
    if(location.hash !== '#preview'){
      // show form
      formCol.classList.remove('hidden');
      previewCol.classList.remove('hidden');
    } else {
      // preview state
    }
  }
});

/* ensure that on initial load, mobile shows form and preview visible only when toggled */
function handleResize(){
  if(isMobile()){
    // show form, hide preview (user will click update)
    // keep preview hidden until user clicks update
    previewCol.classList.add('hidden');
    formCol.classList.remove('hidden');
  } else {
    previewCol.classList.remove('hidden');
    formCol.classList.remove('hidden');
  }
}
window.addEventListener('resize', handleResize);

/* auto render on input */
['name','title','summary','hobbies','father','dob','marital','languages','idNo','religion','nationality','declaration','profileCustom','objectiveCustom'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('input', ()=>{ render(); });
});
['profile','objective','templateSelect','templateDropdown'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('change', ()=>{ render(); });
});

/* set initial template and perform initial render */
currentTemplate = parseInt(templateDropdown.value||1);
handleResize();
render();

</script>
</body>
</html>
